name: google-revoke-session
description: Sign out a Google Workspace user from all web and device sessions

# Input parameters for web form generation
inputs:
  userKey:
    type: text
    description: The user's primary email address, alias email address, or unique user ID
    required: true
    validation:
      min: 1
      max: 200

  address:
    type: text
    description: Google Admin SDK API base URL (defaults to https://admin.googleapis.com if not provided)
    required: false
    validation:
      min: 1
      max: 255

# Required secrets (configured at deployment time)
# The configured auth type will determine which secrets are available
secrets:
  - BEARER_AUTH_TOKEN  # For Bearer authentication
  - BASIC_USERNAME  # For Basic authentication
  - BASIC_PASSWORD  # For Basic authentication
  - OAUTH2_CLIENT_CREDENTIALS_CLIENT_SECRET  # For OAuth2 Client Credentials
  - OAUTH2_AUTHORIZATION_CODE_ACCESS_TOKEN  # For OAuth2 Authorization Code

# Expected output structure
outputs:
  userKey:
    type: text
    description: The user key that was signed out

  sessionRevoked:
    type: boolean
    description: Whether the session was successfully revoked

  revokedAt:
    type: datetime
    description: When the session was revoked (ISO 8601)

# Runtime configuration
runtime:
  type: nodejs-22
  timeout: 30s
  memory: 128Mi